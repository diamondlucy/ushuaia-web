<html>
<head>
<title>Spike Markdown Parser - Marked</title>
<script type="text/javascript" src="marked.js"></script>
<script type="text/javascript">
marked.setOptions({
  gfm: true,
  highlight: function (code, lang, callback) {
    pygmentize({ lang: lang, format: 'html' }, code, function (err, result) {
      callback(err, result.toString());
    });
  },
  tables: true,
  breaks: false,
  pedantic: false,
  sanitize: true,
  smartLists: true,
  smartypants: false,
  langPrefix: 'lang-'
});

function edit() {
	display("editor");
	hide("preview");
}

function preview() {
	hide("editor");
	$("preview").innerHTML = marked($("editor-content").value)
	display("preview");
}

function $(id) {
	return document.getElementById(id);
}

function display(id) {
	$(id).style.display = "";	
}

function hide(id) {
	$(id).style.display = "none";	
}

</script>
<style type="text/css">
	.actions, #editor, #preview, .help {
		width: 90%;
	}

	#editor {
		height: 100%;
	}

	#editor textarea {
		width: 100%;
		height: 100%;	
	}

	#preview {
		height: 100%;
	}
</style>
</head>

<body>
	
<header><h1>Spike Markdown Parser - Marked</h1></header>
<div class="help">
	<a href="https://github.com/chjj/marked">Marked</a> is a full-featured <a href="http://en.wikipedia.org/wiki/Markdown">Markdown</a> parser and compiler, written in JavaScript. It also support <a href="https://help.github.com/articles/github-flavored-markdown">GitHub Flavored Markdown</a>.
</div>
<hr>
<div class="actions">
	<a href="javascript:edit()">Edit</a>&nbsp;&nbsp;&nbsp;&nbsp;
    <a href="javascript:preview()">Preview</a>
</div>

<div id="editor">
	<textarea id="editor-content"></textarea>
</div>
<div id="preview"></div>

</body>
</html>